(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{T60g:function(t,i,e){"use strict";e.r(i),e.d(i,"PostRegisterLocationsPageModule",(function(){return x}));var n=e("ofXK"),c=e("3Pt+"),o=e("TEn/"),s=e("tyNb"),a=e("KFg1"),r=e("iBXB"),h=e("MCRb"),l=e("IzEk"),d=e("y8Nm"),u=e("ue0K"),f=e("VQPA"),p=e("fXoL"),g=e("cZdB");function m(t,i){if(1&t){const t=p.ic();p.hc(0,"ion-item",11),p.pc("click",(function(){p.Fc(t);const e=i.$implicit;return p.sc(2).dataas(e)})),p.hc(1,"ion-label"),p.Kc(2),p.gc(),p.gc()}if(2&t){const t=i.$implicit;p.Rb(2),p.Lc(t.name)}}function b(t,i){if(1&t){const t=p.ic();p.hc(0,"ion-item",11),p.pc("click",(function(){p.Fc(t);const e=i.$implicit;return p.sc(2).dataas(e)})),p.hc(1,"ion-label"),p.Kc(2),p.gc(),p.gc()}if(2&t){const t=i.$implicit;p.Rb(2),p.Lc(t.name)}}function T(t,i){if(1&t&&(p.hc(0,"ion-list"),p.Jc(1,m,3,1,"ion-item",10),p.tc(2,"filter"),p.Jc(3,b,3,1,"ion-item",10),p.tc(4,"filter"),p.gc()),2&t){const t=p.sc();p.Rb(1),p.yc("ngForOf",p.vc(2,2,t.countries.Countries,t.filterTerm)),p.Rb(2),p.yc("ngForOf",p.vc(4,5,t.states.States,t.filterTerm))}}function y(t,i){if(1&t){const t=p.ic();p.hc(0,"ion-button",12),p.pc("click",(function(){p.Fc(t);return p.sc().switchMode()})),p.Kc(1,"Next"),p.gc()}}function M(t,i){if(1&t){const t=p.ic();p.hc(0,"ion-button",12),p.pc("click",(function(){p.Fc(t);return p.sc().switchMode()})),p.Kc(1,"Back"),p.gc()}}function w(t,i){if(1&t){const t=p.ic();p.hc(0,"ion-button",12),p.pc("click",(function(){p.Fc(t);return p.sc().onSubmit()})),p.Kc(1,"I'm Done!"),p.gc()}}class k{constructor(t,i,e,n,c,o){this.router=t,this.searchLocations=i,this.loadingController=e,this.accountService=n,this.zone=c,this.route=o,this.selectionMode=r.a.VISITED,this.titleTextVisited="Where have you visited?",this.titleTextToVisit="Bucketlist",this.subtitleTextVisited="We'll get to where you want to go in a moment,\n  but first let's show your friends (and yourself) where you've been!",this.subtitleTextToVisit="Mark down every and any place you find interesting and want to checkout someday, let's make it happen!",this.displayVisitedText=!0,this.locationRequest={locations:{},registration:!0},this.hasError=!1,this.error="",this.countries=d,this.states=u}async ionViewDidEnter(){const t=await this.loadingController.create({});await t.present(),this.map=new a.a(this.zone),this.map.addMapToDiv(this.selectionMode,"register-map"),t.dismiss()}ionViewDidLeave(){this.map.destroyMap()}switchMode(){this.map.zoomHome(),this.selectionMode===r.a.VISITED?(this.map.setSelectionMode(r.a.TO_VISIT),this.displayVisitedText=!1,this.selectionMode=r.a.TO_VISIT):(this.map.setSelectionMode(r.a.VISITED),this.displayVisitedText=!0,this.selectionMode=r.a.VISITED)}mapLocationsToRequest(){this.map.selectedArr.forEach(t=>{this.locationRequest.locations[t.locationId]=t.status})}async onSubmit(){const t=await this.loadingController.create({});await t.present(),this.mapLocationsToRequest(),this.accountService.accountUpdateLocationsPost(this.locationRequest).pipe(Object(l.a)(1)).subscribe(i=>{const e={replaceUrl:!0};t.dismiss(),this.zone.run(()=>{this.router.navigateByUrl("/tab1",e)})},i=>{t.dismiss(),this.hasError=!0,this.error="An unexpected error has occurred."})}searchvalue(){this.hide=!0,this.mapvalue=this.filterTerm,this.map.zoomToLocation(this.mapvalue)}dataas(t){this.hide=!1,this.map.zoomToLocation(t.id)}setFilteredItems(){return this.country.filter(t=>t.name.toLowerCase().indexOf(this.searchTerm.toLowerCase())>-1)}show(t){this.searchLocations.dis=t}}k.\u0275fac=function(t){return new(t||k)(p.cc(s.g),p.cc(f.a),p.cc(o.V),p.cc(h.a),p.cc(p.L),p.cc(s.a))},k.\u0275cmp=p.Wb({type:k,selectors:[["post-register-locations"]],decls:18,vars:7,consts:[["no-bounce",""],[1,"splash"],[1,"ion-align-items-baseline"],[1,"ion-justify-content-start"],[1,"map-search-container"],["spellcheck","true",3,"ngModel","focusout","search","focusin","ngModelChange"],[4,"ngIf"],["id","register-map",1,"chartdiv"],[1,"button-div"],["class","submit-button","expand","block","type","submit",3,"click",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["expand","block","type","submit",1,"submit-button",3,"click"]],template:function(t,i){1&t&&(p.hc(0,"ion-content",0),p.hc(1,"div",1),p.hc(2,"ion-row",2),p.dc(3,"ion-col",3),p.gc(),p.hc(4,"h1"),p.Kc(5),p.gc(),p.hc(6,"h3"),p.Kc(7),p.gc(),p.hc(8,"h4"),p.Kc(9," Click a location on the map to zoom to it. Double click the location to select/deselect it. "),p.gc(),p.hc(10,"div",4),p.hc(11,"ion-searchbar",5),p.pc("focusout",(function(){return i.show(!0)}))("search",(function(){return i.searchvalue()}))("focusin",(function(){return i.show(!1)}))("ngModelChange",(function(t){return i.filterTerm=t})),p.gc(),p.Jc(12,T,5,8,"ion-list",6),p.gc(),p.dc(13,"div",7),p.hc(14,"div",8),p.Jc(15,y,2,0,"ion-button",9),p.Jc(16,M,2,0,"ion-button",9),p.Jc(17,w,2,0,"ion-button",9),p.gc(),p.gc(),p.gc()),2&t&&(p.Rb(5),p.Lc(i.displayVisitedText?i.titleTextVisited:i.titleTextToVisit),p.Rb(2),p.Lc(i.displayVisitedText?i.subtitleTextVisited:i.subtitleTextToVisit),p.Rb(4),p.yc("ngModel",i.filterTerm),p.Rb(1),p.yc("ngIf",1==i.hide),p.Rb(3),p.yc("ngIf",i.displayVisitedText),p.Rb(1),p.yc("ngIf",!i.displayVisitedText),p.Rb(1),p.yc("ngIf",!i.displayVisitedText))},directives:[o.n,o.H,o.m,o.I,o.cb,c.k,c.m,n.k,o.C,n.j,o.y,o.B,o.g],pipes:[g.a],styles:["ion-content[_ngcontent-%COMP%]{--background:none}ion-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-left:5%;padding-top:10%;font-size:40px;font-weight:700;margin:0;color:#fff}ion-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:15px}ion-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{padding-left:5%;padding-right:0;color:#fff;margin:0}ion-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:11px}.map-search-container[_ngcontent-%COMP%]{padding-left:10%;padding-right:10%;margin-top:5px}.submit-button[_ngcontent-%COMP%]{--background:#fff;--background-activated:#fff;--ripple-color:#fff;--background-focused:#fff;--color-focused:#fff;color:#128c7e;--vertical-align:middle;padding-left:5%;padding-right:5%}.button-div[_ngcontent-%COMP%]{padding-top:0}.chartdiv[_ngcontent-%COMP%]{width:100%;height:400px}"]});const v=[{path:"",component:k}];class C{}C.\u0275mod=p.ac({type:C}),C.\u0275inj=p.Zb({factory:function(t){return new(t||C)},imports:[[s.k.forChild(v)],s.k]});class x{}x.\u0275mod=p.ac({type:x}),x.\u0275inj=p.Zb({factory:function(t){return new(t||x)},imports:[[n.c,c.g,o.T,C,g.b]]})}}]);
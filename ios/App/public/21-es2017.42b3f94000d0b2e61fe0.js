(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{b8Qw:function(o,n,t){"use strict";t.r(n),t.d(n,"SignInPageModule",(function(){return h}));var e=t("ofXK"),i=t("3Pt+"),r=t("TEn/"),s=t("tyNb"),a=t("MCRb"),c=t("Jk5i"),l=t("fXoL");function d(o,n){if(1&o&&(l.Qb(0,"div",17),l.Mb(1,"ion-icon",18),l.tc(2),l.Pb()),2&o){const o=l.bc().$implicit;l.Ab(2),l.vc(" ",o.message," ")}}function p(o,n){if(1&o&&(l.Ob(0),l.sc(1,d,3,1,"div",9),l.Nb()),2&o){const o=n.$implicit,t=l.bc();l.Ab(1),l.hc("ngIf",t.loginForm.get("email").hasError(o.type)&&(t.loginForm.get("email").dirty||t.loginForm.get("email").touched))}}function g(o,n){if(1&o&&(l.Qb(0,"div",17),l.Mb(1,"ion-icon",18),l.tc(2),l.Pb()),2&o){const o=l.bc();l.Ab(2),l.vc(" ",o.invalidLoginText," ")}}function b(o,n){if(1&o){const o=l.Rb();l.Qb(0,"ion-button",19),l.Yb("click",(function(){return l.oc(o),l.bc().openAppleSignIn()})),l.Mb(1,"ion-icon",20),l.tc(2," Sign in with Apple "),l.Pb()}}const u=[{path:"",component:(()=>{class o{constructor(o,n,t,e,i,r,s,a){this.formBuilder=o,this.loadingController=n,this.modalController=t,this.platform=e,this.cd=i,this.zone=r,this.router=s,this.accountService=a,this.passwordType="password",this.validationMessages={email:[{type:"required",message:"Email is required."},{type:"pattern",message:"Please enter a valid email."}],password:[{type:"required",message:"Password is required."}]},this.invalidLogin=!1,this.invalidLoginText="",this.showAppleSignIn=!1}togglePasswordMode(){this.passwordType="text"===this.passwordType?"password":"text"}async ngOnInit(){this.showAppleSignIn=this.platform.is("ios");const o=new i.b("",i.p.compose([i.p.required,i.p.pattern("[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,3}$")])),n=new i.b("",i.p.compose([i.p.required]));this.loginForm=new i.d({email:o,password:n})}async openAppleSignIn(){await this.accountService.loginApple().then(async o=>{if(!0===o.firstLogin){const n={replaceUrl:!1,state:{firstName:o.firstName,lastName:o.lastName,email:o.email,password:"",sso:!0}};this.zone.run(()=>{this.router.navigateByUrl("/post-register-about",n)})}else{const o={replaceUrl:!1};this.zone.run(()=>{this.router.navigateByUrl("/tab1",o)})}})}async openFacebookSignIn(){await this.accountService.loginFacebook().then(async o=>{if(!0===o.firstLogin){const n={replaceUrl:!1,state:{firstName:o.firstName,lastName:o.lastName,email:o.email,password:"",sso:!0}};this.zone.run(()=>{this.router.navigateByUrl("/post-register-about",n)})}else{const o={replaceUrl:!1};this.zone.run(()=>{this.router.navigateByUrl("/tab1",o)})}})}async onSubmit(o){const n={userName:this.loginForm.controls.email.value,password:this.loginForm.controls.password.value},t=await this.loadingController.create({});await t.present(),this.accountService.login(n.userName,n.password).then(o=>{console.log(o),this.invalidLogin=!1,this.zone.run(()=>{this.router.navigateByUrl("/tab1",{replaceUrl:!1})}),t.dismiss()},o=>{this.invalidLoginText="auth/user-not-found"===o.code?"User not found":"auth/wrong-password"===o.code?"Invalid password":"Unexpected error",this.invalidLogin=!0,this.refresh(),t.dismiss()})}openRegister(){const o={replaceUrl:!1,state:{}};this.zone.run(()=>{this.router.navigateByUrl("/register",o)})}async presentForgotPassword(){const o=await this.modalController.create({component:c.a,showBackdrop:!0,cssClass:"forgot-password-modal"});return o.onDidDismiss().then(async o=>{}),await o.present()}refresh(){this.cd.detectChanges()}get getInvalidLogin(){return this.invalidLogin}}return o.\u0275fac=function(n){return new(n||o)(l.Lb(i.a),l.Lb(r.U),l.Lb(r.V),l.Lb(r.Y),l.Lb(l.h),l.Lb(l.z),l.Lb(s.g),l.Lb(a.a))},o.\u0275cmp=l.Fb({type:o,selectors:[["sign-in"]],decls:26,vars:7,consts:[["no-bounce","",1,"form-content",3,"scrollY"],[1,"splash"],[3,"formGroup","ngSubmit"],[1,"roundedInput"],["autocapitalize","true","placeholder","Email","type","email","formControlName","email","required",""],[1,"validation-errors"],[4,"ngFor","ngForOf"],["autocapitalize","true","placeholder","Password","formControlName","password","required","",3,"type"],["name","eye","item-right","",3,"click"],["class","error-message",4,"ngIf"],[1,"button-div"],["size","6",2,"padding-left","22px"],["expand","block","type","submit",1,"submit-button",2,"padding-right","0px","padding-left","0",3,"disabled"],["size","6",2,"padding-right","22px"],["expand","block","type","submit",1,"submit-button",2,"padding-right","0px","padding-left","0",3,"click"],["class","apple-button","expand","block",3,"click",4,"ngIf"],[1,"forgot-password-link","center-any-object",3,"click"],[1,"error-message"],["name","information-circle-outline"],["expand","block",1,"apple-button",3,"click"],["slot","start","name","logo-apple"]],template:function(o,n){1&o&&(l.Qb(0,"ion-content",0),l.Qb(1,"div",1),l.Qb(2,"h1"),l.tc(3,"Welcome"),l.Pb(),l.Qb(4,"form",2),l.Yb("ngSubmit",(function(){return n.onSubmit(n.loginForm.value)})),l.Qb(5,"ion-item",3),l.Mb(6,"ion-input",4),l.Qb(7,"div",5),l.sc(8,p,2,1,"ng-container",6),l.Pb(),l.Pb(),l.Qb(9,"ion-item",3),l.Mb(10,"ion-input",7),l.Qb(11,"ion-icon",8),l.Yb("click",(function(){return n.togglePasswordMode()})),l.Pb(),l.Pb(),l.Qb(12,"div",5),l.sc(13,g,3,1,"div",9),l.Pb(),l.Qb(14,"div",10),l.Qb(15,"ion-row"),l.Qb(16,"ion-col",11),l.Qb(17,"ion-button",12),l.tc(18,"Login"),l.Pb(),l.Pb(),l.Qb(19,"ion-col",13),l.Qb(20,"ion-button",14),l.Yb("click",(function(){return n.openRegister()})),l.tc(21,"Register"),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(22,"div",10),l.sc(23,b,3,0,"ion-button",15),l.Qb(24,"h3",16),l.Yb("click",(function(){return n.presentForgotPassword()})),l.tc(25,"Forgot Password?"),l.Pb(),l.Pb(),l.Pb(),l.Pb()),2&o&&(l.hc("scrollY",!1),l.Ab(4),l.hc("formGroup",n.loginForm),l.Ab(4),l.hc("ngForOf",n.validationMessages.email),l.Ab(2),l.hc("type",n.passwordType),l.Ab(3),l.hc("ngIf",n.getInvalidLogin),l.Ab(4),l.hc("disabled",!n.loginForm.valid),l.Ab(6),l.hc("ngIf",n.showAppleSignIn))},directives:[r.m,i.q,i.l,i.e,r.x,r.w,r.bb,i.k,i.c,i.o,e.j,r.t,e.k,r.G,r.l,r.f],styles:["h1[_ngcontent-%COMP%]{font-size:50px;font-weight:700;color:#fff}ion-content[_ngcontent-%COMP%]{--background:none}ion-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-top:25%;padding-bottom:50px;font-size:40px;margin:0;text-align:center;font-weight:700;color:#fff}.roundedInput[_ngcontent-%COMP%]{--border-radius:10px;--border-width:1px;--highlight-height:0;--background:#f8f9fa;padding-top:20px;padding-left:5%;padding-right:5%}.roundedInput.ion-invalid.item-has-focus[_ngcontent-%COMP%]{--border-color:var(--ion-color-danger-shade)}.roundedInput.ion-valid.item-has-focus[_ngcontent-%COMP%]{--border-color:var(--ion-color-success-shade)}.roundedInput.ion-invalid.ion-dirty[_ngcontent-%COMP%]{--border-color:var(--ion-color-danger-shade)}.roundedInput.ion-valid.ion-dirty[_ngcontent-%COMP%]{--border-color:var(--ion-color-success-shade)}.submit-button[_ngcontent-%COMP%]{--background:#fff;--background-activated:#fff;--ripple-color:#fff;--background-focused:#fff;--color-focused:#fff;color:#128c7e;--vertical-align:middle;padding-left:5%;padding-right:5%}.button-div[_ngcontent-%COMP%]{padding-top:6%}.forgot-password-link[_ngcontent-%COMP%]{--vertical-align:middle;color:#fff;text-decoration:underline}"]}),o})()}];let f=(()=>{class o{}return o.\u0275mod=l.Jb({type:o}),o.\u0275inj=l.Ib({factory:function(n){return new(n||o)},imports:[[s.k.forChild(u)],s.k]}),o})(),h=(()=>{class o{}return o.\u0275mod=l.Jb({type:o}),o.\u0275inj=l.Ib({factory:function(n){return new(n||o)},imports:[[e.c,i.g,i.n,r.S,f]]}),o})()}}]);
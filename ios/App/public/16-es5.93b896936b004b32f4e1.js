function asyncGeneratorStep(t,n,e,o,r,i,c){try{var s=t[i](c),a=s.value}catch(l){return void e(l)}s.done?n(a):Promise.resolve(a).then(o,r)}function _asyncToGenerator(t){return function(){var n=this,e=arguments;return new Promise((function(o,r){var i=t.apply(n,e);function c(t){asyncGeneratorStep(i,o,r,c,s,"next",t)}function s(t){asyncGeneratorStep(i,o,r,c,s,"throw",t)}c(void 0)}))}}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,n,e){return n&&_defineProperties(t.prototype,n),e&&_defineProperties(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{qhKe:function(t,n,e){"use strict";e.r(n),e.d(n,"CommentsPageModule",(function(){return w}));var o=e("ofXK"),r=e("3Pt+"),i=e("TEn/"),c=e("tyNb"),s=e("IzEk"),a=e("MCRb"),l=e("ykzJ"),u=e("6g0+"),b=e("fXoL"),p=e("e8h1"),d=e("6Kw5");function m(t,n){if(1&t){var e=b.Rb();b.Qb(0,"ion-row"),b.Qb(1,"ion-col"),b.Qb(2,"div",27),b.Qb(3,"img",28),b.Yb("click",(function(){b.oc(e);var t=b.bc();return t.openViewer(null==t.post?null:t.post.postContentLink)})),b.Pb(),b.Pb(),b.Pb(),b.Pb()}if(2&t){var o=b.bc();b.Ab(3),b.hc("src",null==o.post?null:o.post.postContentLink,b.pc)("alt",null==o.post?null:o.post.postId)}}function g(t,n){1&t&&(b.Qb(0,"h1",29),b.tc(1," No comments! Be the first! "),b.Pb())}function f(t,n){if(1&t){var e=b.Rb();b.Qb(0,"ion-item",30),b.Qb(1,"ion-grid",31),b.Qb(2,"ion-row"),b.Qb(3,"ion-col",32),b.Qb(4,"ion-row",33),b.Qb(5,"ion-col"),b.Qb(6,"img",34),b.Yb("click",(function(){b.oc(e);var t=n.$implicit;return b.bc().openProfile(t.user.id)})),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(7,"ion-col",35),b.Qb(8,"ion-row"),b.Qb(9,"ion-col"),b.Qb(10,"p"),b.Qb(11,"strong"),b.tc(12),b.Pb(),b.tc(13),b.Pb(),b.Pb(),b.Pb(),b.Qb(14,"ion-row"),b.Qb(15,"ion-col"),b.Qb(16,"ion-text",13),b.tc(17),b.cc(18,"dateAgo"),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb()}if(2&t){var o=n.$implicit;b.Ab(6),b.hc("src",o.user.avi,b.pc),b.Ab(6),b.wc("",o.user.firstName," ",o.user.lastname,""),b.Ab(1),b.vc(" ",o.comment," "),b.Ab(4),b.uc(b.dc(18,5,o.date))}}var h,P,k,v=function(t,n){return{"post-image-container":t,"post-container":n}},C=[{path:"",component:(h=function(){function t(n,e,o,r,i,c,s,a,l){var u=this;_classCallCheck(this,t),this.storage=n,this.modalController=e,this.loadingController=o,this.router=r,this.zone=i,this.route=c,this.postSvc=s,this.accountService=a,this.cd=l,this.comments=[],this.newComments=[],this.postId="",this.post=void 0,this.commentText="",this.likeIcon="../../assets/UI/heart.svg",this.likedIcon="../../assets/UI/liked-icon.svg",this.storage.get("image").then((function(t){u.image=t.avi})),this.route.queryParams.subscribe((function(t){u.router.getCurrentNavigation().extras.state&&(u.postId=u.router.getCurrentNavigation().extras.state.postId),u.getPostInfo()}))}var n,e,o,r;return _createClass(t,[{key:"myFunc",value:function(){return{count:1,data:{id:1}}}},{key:"getPostInfo",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function t(){var n,e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadingController.create({});case 2:return n=t.sent,t.next=5,n.present();case 5:return this.getComments(),t.next=8,this.getPost(n).then((function(){e.cd.detectChanges()}));case 8:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"getPost",value:(o=_asyncToGenerator(regeneratorRuntime.mark((function t(n){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e.postSvc.postsSingleIdGet(+e.postId).pipe(Object(s.a)(1)).subscribe(function(){var o=_asyncToGenerator(regeneratorRuntime.mark((function o(r){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:console.log(r),e.post=r,n.dismiss(),t("done");case 1:case"end":return o.stop()}}),o)})));return function(t){return o.apply(this,arguments)}}())})));case 1:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)})},{key:"openViewer",value:(e=_asyncToGenerator(regeneratorRuntime.mark((function t(n){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.postfaa=n,t.next=3,this.modalController.create({component:u.b,componentProps:{src:this.postfaa},cssClass:"ion-img-viewer",keyboardClose:!0,showBackdrop:!0});case 3:return e=t.sent,t.next=6,e.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"likePost",value:function(t){t.likedByCurrentUser||(this.postSvc.postsLikePostIdPost(t.postId.toString()).pipe(Object(s.a)(1)).subscribe(),t.likeCount++,t.likedByCurrentUser=!0)}},{key:"getComments",value:function(){var t=this;this.postSvc.postsCommentsGetPostIdGet(this.postId).pipe(Object(s.a)(1)).subscribe((function(n){t.comments=[];for(var e=n.length,o=0;o<e;o++)t.comments.push(n[o]);t.cd.detectChanges()}))}},{key:"commentOnPost",value:function(){var t=this;this.postSvc.postsCommentPostIdPost(this.postId,{comment:this.commentText}).pipe(Object(s.a)(1)).subscribe((function(n){t.getComments()})),this.commentText=""}},{key:"backToFeed",value:function(){var t=this;this.zone.run((function(){t.router.navigateByUrl("/tab1")}))}},{key:"openProfile",value:function(t){var n=this,e={replaceUrl:!1,state:{userId:t}};this.zone.run((function(){n.router.navigateByUrl("/user-profile",e)}))}},{key:"presentSearchModal",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:l.a,componentProps:{},showBackdrop:!0,cssClass:"search-modal"});case 2:return n=t.sent,t.next=5,n.present();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"canSend",get:function(){return this.commentText.length>1&&this.commentText.length<250}}]),t}(),h.\u0275fac=function(t){return new(t||h)(b.Lb(p.b),b.Lb(i.V),b.Lb(i.U),b.Lb(c.g),b.Lb(b.z),b.Lb(c.a),b.Lb(a.b),b.Lb(a.a),b.Lb(b.h))},h.\u0275cmp=b.Fb({type:h,selectors:[["comments"]],decls:53,vars:21,consts:[[1,"ion-no-border",2,"background-color","#128C7E"],["color","#128C7E",1,"ion-no-border"],[1,"header-grid"],[1,"ion-align-items-baseline"],[1,"ion-justify-content-start"],["defaultHref","/tab1",2,"color","beige",3,"click"],[3,"scrollY"],[3,"ngClass"],[1,"card-flip-front"],[1,"three-col-grid"],["size",".6"],[3,"src","click"],[1,"card-title"],["color","medium"],["size",".4"],[1,"ion-justify-content-center"],["src","../../assets/UI/optionsDots.svg"],[4,"ngIf"],[1,"ion-justify-content-center",3,"click"],[3,"src"],["size","4"],[1,"align-self-center","text-center"],["type","text","placeholder","Comment",3,"ngModel","ngModelChange"],["clear","","item-right","",3,"disabled","click"],["class","ion-text-center ion-justify-center","style","height: 100%; flex-direction: column",4,"ngIf"],[3,"items","scrollTop"],["class","comment",4,"virtualItem"],[1,"swiper-zoom-container"],["ionImgViewer","","height","300",1,"rcorners",3,"src","alt","click"],[1,"ion-text-center","ion-justify-center",2,"height","100%","flex-direction","column"],[1,"comment"],[1,"comments-grid"],[1,"ion-align-self-center"],[1,"ion-align-items-center"],[1,"user-pic","img-center",3,"src","click"],["size","2.2"]],template:function(t,n){1&t&&(b.Qb(0,"ion-header",0),b.Qb(1,"ion-toolbar",1),b.Qb(2,"ion-grid",2),b.Qb(3,"ion-row",3),b.Qb(4,"ion-col",4),b.Qb(5,"ion-buttons"),b.Qb(6,"ion-back-button",5),b.Yb("click",(function(){return n.backToFeed()})),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(7,"ion-content",6),b.Qb(8,"ion-card",7),b.Qb(9,"div",8),b.Qb(10,"ion-grid",9),b.Qb(11,"ion-row"),b.Qb(12,"ion-col",10),b.Qb(13,"ion-avatar"),b.Qb(14,"img",11),b.Yb("click",(function(){return n.openProfile(null==n.post?null:n.post.fkUserId)})),b.Pb(),b.Pb(),b.Pb(),b.Qb(15,"ion-col"),b.Qb(16,"ion-row"),b.Qb(17,"ion-card-title",12),b.tc(18),b.Pb(),b.Pb(),b.Qb(19,"ion-row"),b.Qb(20,"ion-card-subtitle",13),b.tc(21),b.Pb(),b.Pb(),b.Pb(),b.Qb(22,"ion-col",14),b.Qb(23,"ion-buttons"),b.Qb(24,"ion-button",15),b.Mb(25,"img",16),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(26,"ion-card-content"),b.Qb(27,"ion-grid"),b.Qb(28,"ion-row",3),b.Qb(29,"ion-col"),b.tc(30),b.Pb(),b.Pb(),b.sc(31,m,4,2,"ion-row",17),b.Qb(32,"ion-row"),b.Qb(33,"ion-col"),b.Qb(34,"ion-buttons"),b.Qb(35,"ion-button",18),b.Yb("click",(function(){return n.likePost(n.post)})),b.Mb(36,"img",19),b.Pb(),b.tc(37),b.Pb(),b.Pb(),b.Mb(38,"ion-col",20),b.Qb(39,"ion-col",21),b.Qb(40,"ion-note"),b.tc(41),b.cc(42,"dateAgo"),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(43,"ion-item"),b.Qb(44,"ion-input",22),b.Yb("ngModelChange",(function(t){return n.commentText=t})),b.Pb(),b.Qb(45,"button",23),b.Yb("click",(function(){return n.commentOnPost()})),b.tc(46," Send "),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.sc(47,g,2,0,"h1",24),b.Qb(48,"ion-grid"),b.Qb(49,"ion-row"),b.Qb(50,"ion-col"),b.Qb(51,"ion-virtual-scroll",25),b.sc(52,f,19,7,"ion-item",26),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb()),2&t&&(b.Ab(7),b.hc("scrollY",!0),b.Ab(1),b.hc("ngClass",b.lc(18,v,null==n.post?null:n.post.postContentLink,void 0===(null==n.post?null:n.post.postContentLink))),b.Ab(6),b.hc("src",null==n.post||null==n.post.fkUser?null:n.post.fkUser.avi,b.pc),b.Ab(4),b.wc("",null==n.post||null==n.post.fkUser?null:n.post.fkUser.firstname," ",null==n.post||null==n.post.fkUser?null:n.post.fkUser.lastname,""),b.Ab(3),b.uc(null==n.post?null:n.post.location.locationName),b.Ab(9),b.vc(" ",null==n.post?null:n.post.postCaption," "),b.Ab(1),b.hc("ngIf",null==n.post?null:n.post.postContentLink),b.Ab(5),b.hc("src",1==(null==n.post?null:n.post.likedByCurrentUser)?n.likedIcon:n.likeIcon,b.pc),b.Ab(1),b.vc(" ",(null==n.post?null:n.post.likeCount)||0," "),b.Ab(4),b.uc(b.dc(42,16,null==n.post?null:n.post.postTime)),b.Ab(3),b.hc("ngModel",n.commentText),b.Ab(1),b.hc("disabled",!n.canSend),b.Ab(2),b.hc("ngIf",0===n.comments.length),b.Ab(4),b.hc("items",n.comments)("scrollTop",!0))},directives:[i.s,i.Q,i.r,i.G,i.l,i.g,i.d,i.e,i.m,i.h,o.i,i.c,i.k,i.j,i.f,i.i,o.k,i.C,i.x,i.w,i.bb,r.k,r.m,i.R,i.db,i.N],pipes:[d.a],styles:[".user-pic[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.circle-pic[_ngcontent-%COMP%]{width:60px;height:50px;border-radius:50%}.header-grid[_ngcontent-%COMP%]{--ion-grid-columns:3;--ion-grid-column-padding:1px;--ion-grid-padding:1px}ion-content[_ngcontent-%COMP%]{--padding-top:10%}.comments-grid[_ngcontent-%COMP%]{--ion-grid-column-padding:1px;--ion-grid-padding:1px}.comment[_ngcontent-%COMP%]{margin-bottom:5px!important}.comment[_ngcontent-%COMP%], ion-card[_ngcontent-%COMP%]{margin-top:4px!important}ion-card[_ngcontent-%COMP%]{margin-bottom:0!important}.btn[_ngcontent-%COMP%]{border:none;background-color:inherit;font-size:16px;display:inline-block}.card-title[_ngcontent-%COMP%]{font-size:20px;font-weight:400;padding-bottom:5px}.comments-grid[_ngcontent-%COMP%]{--ion-grid-columns:3}.post-image-container[_ngcontent-%COMP%]{height:100%!important}.post-container[_ngcontent-%COMP%]{height:5.5%!important}ion-card-content[_ngcontent-%COMP%]{padding-top:0!important;padding:5px;padding-bottom:10px!important}ion-card[_ngcontent-%COMP%]{max-height:580px}.three-col-grid[_ngcontent-%COMP%]{--ion-grid-columns:3}.rcorners[_ngcontent-%COMP%]{border-radius:25px;background-position:0 0;background-repeat:repeat}.flip-container[_ngcontent-%COMP%]{perspective:1000px}.flip-container.flipped[_ngcontent-%COMP%]   .flipper[_ngcontent-%COMP%]{transform:rotateY(180deg)}.flipper[_ngcontent-%COMP%]{transition:.6s;transform-style:preserve-3d;position:relative}.back[_ngcontent-%COMP%], .front[_ngcontent-%COMP%]{backface-visibility:hidden}.front[_ngcontent-%COMP%]{z-index:2;transform:rotateY(0deg)}.back[_ngcontent-%COMP%]{transform:rotateY(180deg)}"]}),h)}],Q=((P=function t(){_classCallCheck(this,t)}).\u0275mod=b.Jb({type:P}),P.\u0275inj=b.Ib({factory:function(t){return new(t||P)},imports:[[c.k.forChild(C)],c.k]}),P),y=e("PCNd"),w=((k=function t(){_classCallCheck(this,t)}).\u0275mod=b.Jb({type:k}),k.\u0275inj=b.Ib({factory:function(t){return new(t||k)},imports:[[o.c,r.g,i.S,y.a,Q]]}),k)}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{"O/ay":function(c,i,n){"use strict";n.r(i),n.d(i,"NotificationsPageModule",(function(){return u}));var t=n("TEn/"),o=n("tyNb"),e=n("ofXK"),r=n("3Pt+"),s=n("IzEk"),a=n("MCRb"),g=n("fXoL"),h=n("e8h1"),d=n("6Kw5");function l(c,i){1&c&&(g.hc(0,"h1",13),g.Kc(1," No notifications yet\n"),g.gc())}function m(c,i){if(1&c){const c=g.ic();g.hc(0,"ion-card",14),g.pc("click",(function(){g.Fc(c);const n=i.$implicit;return g.sc().openPost(n.postId)})),g.hc(1,"ion-grid",15),g.hc(2,"ion-row",16),g.hc(3,"ion-col"),g.hc(4,"ion-row"),g.hc(5,"ion-col"),g.dc(6,"img",17),g.gc(),g.gc(),g.hc(7,"ion-row"),g.hc(8,"ion-col"),g.dc(9,"img",18),g.gc(),g.gc(),g.gc(),g.hc(10,"ion-col",19),g.hc(11,"ion-row"),g.hc(12,"ion-col"),g.hc(13,"p"),g.hc(14,"strong"),g.Kc(15),g.gc(),g.Kc(16),g.gc(),g.gc(),g.gc(),g.hc(17,"ion-row",20),g.hc(18,"ion-col",21),g.hc(19,"ion-note"),g.Kc(20),g.tc(21,"dateAgo"),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc()}if(2&c){const c=i.$implicit;g.Rb(6),g.yc("src",c.userAvi,g.Gc),g.Rb(3),g.yc("src",c.icon,g.Gc),g.Rb(6),g.Lc(c.name),g.Rb(1),g.Nc(" ",c.verbage," ",1==c.isComment?'"'+c.comment+'"':""," "),g.Rb(4),g.Lc(g.uc(21,6,c.time))}}class f{constructor(c,i,n,t,o,e,r){this.storage=c,this.router=i,this.zone=n,this.userService=t,this.accountService=o,this.loadingController=e,this.cd=r,this.notifications=[],this.commentIcon="../../../assets/UI/comment-icon.svg",this.likeIcon="../../../assets/UI/liked-icon.svg",this.commentVerbage="commented on your post",this.likeVerbage="liked your post",this.userId="",this.userId=this.accountService.getUserId()}async ionViewDidEnter(){const c=await this.loadingController.create();await c.present(),await this.refreshNotifications(c).then(()=>{this.cd.detectChanges()}),c.dismiss()}refreshNotifications(c){return this.notifications=[],new Promise(i=>{this.userService.userNotificationsGet().pipe(Object(s.a)(1)).subscribe(async n=>{n.forEach(c=>{const i=""!==c.comment;this.notifications.push({name:`${c.userWhoPerformedAction.firstName} ${c.userWhoPerformedAction.lastName}`,icon:i?this.commentIcon:this.likeIcon,verbage:i?this.commentVerbage:this.likeVerbage,isComment:i,comment:c.comment,time:c.date,postId:c.fkPostId,userAvi:c.userWhoPerformedAction.avi})}),void 0!==c.target&&c.target.complete(),i("done")})})}openPost(c){const i={replaceUrl:!0,state:{postId:c}};this.zone.run(()=>{this.router.navigateByUrl("/comments",i)})}}f.\u0275fac=function(c){return new(c||f)(g.cc(h.b),g.cc(o.g),g.cc(g.L),g.cc(a.c),g.cc(a.a),g.cc(t.V),g.cc(g.j))},f.\u0275cmp=g.Wb({type:f,selectors:[["notifications"]],decls:14,vars:3,consts:[[1,"ion-no-border",2,"background-color","#128C7E"],["color","#128C7E",1,"ion-no-border"],[1,"header-grid"],[1,"ion-align-items-baseline"],[1,"ion-justify-content-start"],["defaultHref","/tab1",2,"color","white"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["refresherRef",""],["pullingText","Pull to refresh","refreshingSpinner","circles","refreshingText","Refreshing..."],["class","ion-text-center ion-justify-center","style","height: 100%; flex-direction: column",4,"ngIf"],[1,"notifications-list"],[3,"click",4,"ngFor","ngForOf"],[1,"ion-text-center","ion-justify-center",2,"height","100%","flex-direction","column"],[3,"click"],[1,"comments-grid"],[2,"padding-left","8px","padding-top","8px"],[1,"user-pic","img-center",3,"src"],[3,"src"],["size","2.5"],[1,"ion-align-items-end"],[1,"ion-align-self-end"]],template:function(c,i){1&c&&(g.hc(0,"ion-header",0),g.hc(1,"ion-toolbar",1),g.hc(2,"ion-grid",2),g.hc(3,"ion-row",3),g.hc(4,"ion-col",4),g.hc(5,"ion-buttons"),g.dc(6,"ion-back-button",5),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.gc(),g.hc(7,"ion-content",6),g.hc(8,"ion-refresher",7,8),g.pc("ionRefresh",(function(c){return i.refreshNotifications(c)})),g.dc(10,"ion-refresher-content",9),g.gc(),g.Jc(11,l,2,0,"h1",10),g.hc(12,"ion-list",11),g.Jc(13,m,22,8,"ion-card",12),g.gc(),g.gc()),2&c&&(g.Rb(7),g.yc("fullscreen",!0),g.Rb(4),g.yc("ngIf",0===i.notifications.length),g.Rb(2),g.yc("ngForOf",i.notifications))},directives:[t.t,t.R,t.s,t.H,t.m,t.h,t.e,t.f,t.n,t.E,t.F,e.k,t.C,e.j,t.i,t.D],pipes:[d.a],styles:[".user-pic[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}p[_ngcontent-%COMP%]{margin:0;padding-top:6px;padding-right:2px;padding-bottom:12px}ion-content[_ngcontent-%COMP%]{--padding-top:10%}.comments-grid[_ngcontent-%COMP%]{--ion-grid-columns:3;--ion-grid-column-padding:1px;--ion-grid-padding:1px}ion-card[_ngcontent-%COMP%]{margin-bottom:10px!important;margin-top:4px!important}"]});var p=n("PCNd");class u{}u.\u0275mod=g.ac({type:u}),u.\u0275inj=g.Zb({factory:function(c){return new(c||u)},imports:[[t.T,e.c,r.g,p.a,o.k.forChild([{path:"",component:f}])]]})}}]);
{"version":3,"sources":["./src/app/pages/comments/comments-routing.module.ts","./src/app/pages/comments/comments.module.ts","./src/app/pages/comments/comments.page.ts","./src/app/pages/comments/comments.page.html"],"names":[],"mappings":"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","file":"pages-comments-comments-module-es2017.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CommentsPage } from './comments.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CommentsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CommentsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CommentsPageRoutingModule } from './comments-routing.module';\n\nimport { CommentsPage } from './comments.page';\nimport { SharedModule } from 'src/app/shared/shared.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SharedModule,\n    CommentsPageRoutingModule\n  ],\n  declarations: [CommentsPage]\n})\nexport class CommentsPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, NavigationExtras, Router } from '@angular/router';\nimport { ModalController } from '@ionic/angular';\nimport { take } from 'rxjs/operators';\nimport { AccountsService, PostService } from 'src/app/backend/clients';\nimport { CommentForPost } from 'src/app/backend/clients/model/commentForPost';\nimport { CommentApi } from 'src/app/backend/clients/model/commentApi';\nimport { SearchPage } from '../modals/search/search.page';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'comments',\n  templateUrl: './comments.page.html',\n  styleUrls: ['./comments.page.scss'],\n})\nexport class CommentsPage implements OnInit {\n\n  comments = [];\n  thisIstheDataForThisComponent: Observable<any>;\n  newComments = [];\n  postId = '';\n  userId: any;\n  public commentText = '';\n\n  constructor(public modalController: ModalController,\n              private router: Router,\n              private route: ActivatedRoute,\n              private postSvc: PostService,\n              private accountService: AccountsService) {\n                  this.route.queryParams.subscribe(params => {\n                  if (this.router.getCurrentNavigation().extras.state) {\n                    this.postId = this.router.getCurrentNavigation().extras.state.postId;\n                  }\n                });\n              }\n              myFunc() {\n                return ({count: 1, data: {id: 1}})\n              }\n  ngOnInit() {\n    this.userId = this.accountService.getUserId();\n  }\n  ionViewWillEnter() {\n    this.getComments();\n  }\n  \n  getComments() {\n    // todo fix this. the list is overwriting\n    this.postSvc.postsCommentsGetPostIdGet(this.postId).pipe(take(1)).subscribe(res => {\n      if (this.comments.length === 0) {\n        this.comments = [];\n      } else {\n        this.comments = [];\n        // this.newComments = [];\n        // console.log(this.comments);\n        // let oldResLen = oldComments.length;\n        //   for (let i = 0; i < oldResLen; i++) {\n        //     console.log(i);\n        //     this.comments.push(oldComments[i]);\n            \n        //     this.newComments.push(oldComments[i]);\n        //   }\n      }\n      let resLen = res.length;\n      for (let i = 0; i < resLen; i++) {\n        console.log(i);\n        this.comments.push(res[i]);\n      }\n      // this.comments = res;\n    });\n  }\n\n  get canSend(): boolean {\n    return this.commentText.length > 1 && this.commentText.length < 250;\n  }\n\n  commentOnPost() {\n    const comment = {\n      comment: this.commentText\n    } as CommentApi;\n\n    this.postSvc.postsCommentPostIdPost(this.postId, comment).pipe(take(1)).subscribe(res => {\n      // todo handle error. refresh comments after new posted\n      this.getComments();\n    });\n    this.commentText = '';\n  }\n\n  backToFeed() {\n    this.router.navigateByUrl('/news-feed');\n  }\n\n  openProfile() {\n    const navigationExtras: NavigationExtras = {\n      replaceUrl: true,\n      skipLocationChange: true,\n      state: {\n        userId: this.accountService.getUserId()\n      }\n    };\n    this.router.navigateByUrl('/user-profile', navigationExtras);\n  }\n\n  async presentSearchModal() {\n    const modal = await this.modalController.create({\n      component: SearchPage,\n      componentProps: {\n\n      },\n      showBackdrop: true,\n      cssClass: 'search-modal'\n    });\n    return await modal.present();\n  }\n}\n","<ion-header style=\"background-color: #128c7e\">\n  <ion-toolbar color=\"#128C7E\">\n    <ion-grid class=\"header-grid\">\n      <ion-row class=\"ion-align-items-baseline\">\n        <ion-col class=\"ion-justify-content-start\">\n          <ion-buttons class=\"ion-justify-content-start\">\n            <ion-button\n              class=\"ion-justify-content-start circle-pic\"\n              (click)=\"openProfile()\"\n            >\n              <img\n                class=\"img-center circle-pic\"\n                src=\"../../assets/defaultuser.png\"\n              />\n            </ion-button>\n          </ion-buttons>\n        </ion-col>\n        <ion-col class=\"ion-justify-self-bottom\">\n          <img\n            height=\"60px\"\n            width=\"120px\"\n            src=\"../../assets/logos/whiteLogo.png\"\n          />\n        </ion-col>\n        <ion-col class=\"ion-justify-content-end\">\n          <ion-buttons class=\"ion-justify-content-end\">\n            <ion-button\n              class=\"ion-justify-content-end\"\n              (click)=\"presentSearchModal()\"\n            >\n              <img\n                class=\"img-center\"\n                src=\"../../assets/UI/search-outline.svg\"\n              />\n            </ion-button>\n          </ion-buttons>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n  </ion-toolbar>\n</ion-header>\n<ion-content [scrollY]=\"false\">\n  <h1\n    *ngIf=\"comments.length === 0\"\n    class=\"ion-text-center ion-justify-center\"\n    style=\"height: 100%; flex-direction: column\"\n  >\n    No comments! Be the first!\n  </h1>\n  <ion-grid>\n    <ion-row>\n      <ion-col>\n         <ion-virtual-scroll [items]=\"comments\">\n          <ion-item\n            *virtualItem=\"let comment; let itemBounds = bounds;\"\n            class=\"comment\"\n          >\n            <ion-grid class=\"comments-grid\">\n              <ion-row>\n                <ion-col class=\"ion-align-self-center\">\n                  <ion-row class=\"ion-align-items-center\">\n                    <ion-col>\n                      <img [src]=\"comment.user.avi\" class=\"user-pic img-center\" />\n                    </ion-col>\n                  </ion-row>\n                </ion-col>\n                <ion-col size=\"2.2\">\n                  <ion-row>\n                    <ion-col>\n                      <p>\n                        <strong\n                          >{{comment.user.firstName}}\n                          {{comment.user.lastname}}</strong\n                        >\n                        {{comment.comment}}\n                      </p>\n                    </ion-col>\n                  </ion-row>\n                  <ion-row>\n                    <ion-col>\n                      <ion-text color=\"medium\">{{comment.date | dateAgo}}</ion-text>\n                    </ion-col>\n                  </ion-row>\n                </ion-col>\n              </ion-row>\n            </ion-grid>\n          </ion-item>\n        </ion-virtual-scroll>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-content>\n<ion-footer>\n  <ion-item >\n    <ion-input type=\"text\" placeholder=\"Comment\" [(ngModel)]=\"commentText\"></ion-input>\n    <button [disabled]=\"!canSend\" clear item-right (click)=\"commentOnPost()\">Send</button>\n   </ion-item>\n</ion-footer>\n"],"sourceRoot":"webpack:///"}
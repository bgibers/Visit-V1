{"version":3,"sources":["webpack:///src/app/pages/comments/comments-routing.module.ts","webpack:///src/app/pages/comments/comments.module.ts","webpack:///src/app/pages/comments/comments.page.ts","webpack:///src/app/pages/comments/comments.page.html"],"names":["routes","path","component","CommentsPageRoutingModule","forChild","imports","exports","CommentsPageModule","declarations","CommentsPage","modalController","router","route","postSvc","accountService","comments","newComments","postId","commentText","queryParams","subscribe","params","getCurrentNavigation","extras","state","count","data","id","userId","getUserId","getComments","postsCommentsGetPostIdGet","pipe","res","length","resLen","i","console","log","push","comment","postsCommentPostIdPost","navigateByUrl","navigationExtras","replaceUrl","skipLocationChange","create","componentProps","showBackdrop","cssClass","modal","present","openProfile","presentSearchModal","commentOnPost","selector","templateUrl","styleUrls"],"mappings":"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","file":"pages-comments-comments-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CommentsPage } from './comments.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CommentsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CommentsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CommentsPageRoutingModule } from './comments-routing.module';\n\nimport { CommentsPage } from './comments.page';\nimport { SharedModule } from 'src/app/shared/shared.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SharedModule,\n    CommentsPageRoutingModule\n  ],\n  declarations: [CommentsPage]\n})\nexport class CommentsPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, NavigationExtras, Router } from '@angular/router';\nimport { ModalController } from '@ionic/angular';\nimport { take } from 'rxjs/operators';\nimport { AccountsService, PostService } from 'src/app/backend/clients';\nimport { CommentForPost } from 'src/app/backend/clients/model/commentForPost';\nimport { CommentApi } from 'src/app/backend/clients/model/commentApi';\nimport { SearchPage } from '../modals/search/search.page';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'comments',\n  templateUrl: './comments.page.html',\n  styleUrls: ['./comments.page.scss'],\n})\nexport class CommentsPage implements OnInit {\n\n  comments = [];\n  thisIstheDataForThisComponent: Observable<any>;\n  newComments = [];\n  postId = '';\n  userId: any;\n  public commentText = '';\n\n  constructor(public modalController: ModalController,\n              private router: Router,\n              private route: ActivatedRoute,\n              private postSvc: PostService,\n              private accountService: AccountsService) {\n                  this.route.queryParams.subscribe(params => {\n                  if (this.router.getCurrentNavigation().extras.state) {\n                    this.postId = this.router.getCurrentNavigation().extras.state.postId;\n                  }\n                });\n              }\n              myFunc() {\n                return ({count: 1, data: {id: 1}})\n              }\n  ngOnInit() {\n    this.userId = this.accountService.getUserId();\n  }\n  ionViewWillEnter() {\n    this.getComments();\n  }\n  \n  getComments() {\n    // todo fix this. the list is overwriting\n    this.postSvc.postsCommentsGetPostIdGet(this.postId).pipe(take(1)).subscribe(res => {\n      if (this.comments.length === 0) {\n        this.comments = [];\n      } else {\n        this.comments = [];\n        // this.newComments = [];\n        // console.log(this.comments);\n        // let oldResLen = oldComments.length;\n        //   for (let i = 0; i < oldResLen; i++) {\n        //     console.log(i);\n        //     this.comments.push(oldComments[i]);\n            \n        //     this.newComments.push(oldComments[i]);\n        //   }\n      }\n      let resLen = res.length;\n      for (let i = 0; i < resLen; i++) {\n        console.log(i);\n        this.comments.push(res[i]);\n      }\n      // this.comments = res;\n    });\n  }\n\n  get canSend(): boolean {\n    return this.commentText.length > 1 && this.commentText.length < 250;\n  }\n\n  commentOnPost() {\n    const comment = {\n      comment: this.commentText\n    } as CommentApi;\n\n    this.postSvc.postsCommentPostIdPost(this.postId, comment).pipe(take(1)).subscribe(res => {\n      // todo handle error. refresh comments after new posted\n      this.getComments();\n    });\n    this.commentText = '';\n  }\n\n  backToFeed() {\n    this.router.navigateByUrl('/news-feed');\n  }\n\n  openProfile() {\n    const navigationExtras: NavigationExtras = {\n      replaceUrl: true,\n      skipLocationChange: true,\n      state: {\n        userId: this.accountService.getUserId()\n      }\n    };\n    this.router.navigateByUrl('/user-profile', navigationExtras);\n  }\n\n  async presentSearchModal() {\n    const modal = await this.modalController.create({\n      component: SearchPage,\n      componentProps: {\n\n      },\n      showBackdrop: true,\n      cssClass: 'search-modal'\n    });\n    return await modal.present();\n  }\n}\n","<ion-header style=\"background-color: #128c7e\">\n  <ion-toolbar color=\"#128C7E\">\n    <ion-grid class=\"header-grid\">\n      <ion-row class=\"ion-align-items-baseline\">\n        <ion-col class=\"ion-justify-content-start\">\n          <ion-buttons class=\"ion-justify-content-start\">\n            <ion-button\n              class=\"ion-justify-content-start circle-pic\"\n              (click)=\"openProfile()\"\n            >\n              <img\n                class=\"img-center circle-pic\"\n                src=\"../../assets/defaultuser.png\"\n              />\n            </ion-button>\n          </ion-buttons>\n        </ion-col>\n        <ion-col class=\"ion-justify-self-bottom\">\n          <img\n            height=\"60px\"\n            width=\"120px\"\n            src=\"../../assets/logos/whiteLogo.png\"\n          />\n        </ion-col>\n        <ion-col class=\"ion-justify-content-end\">\n          <ion-buttons class=\"ion-justify-content-end\">\n            <ion-button\n              class=\"ion-justify-content-end\"\n              (click)=\"presentSearchModal()\"\n            >\n              <img\n                class=\"img-center\"\n                src=\"../../assets/UI/search-outline.svg\"\n              />\n            </ion-button>\n          </ion-buttons>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n  </ion-toolbar>\n</ion-header>\n<ion-content [scrollY]=\"false\">\n  <h1\n    *ngIf=\"comments.length === 0\"\n    class=\"ion-text-center ion-justify-center\"\n    style=\"height: 100%; flex-direction: column\"\n  >\n    No comments! Be the first!\n  </h1>\n  <ion-grid>\n    <ion-row>\n      <ion-col>\n         <ion-virtual-scroll [items]=\"comments\">\n          <ion-item\n            *virtualItem=\"let comment; let itemBounds = bounds;\"\n            class=\"comment\"\n          >\n            <ion-grid class=\"comments-grid\">\n              <ion-row>\n                <ion-col class=\"ion-align-self-center\">\n                  <ion-row class=\"ion-align-items-center\">\n                    <ion-col>\n                      <img [src]=\"comment.user.avi\" class=\"user-pic img-center\" />\n                    </ion-col>\n                  </ion-row>\n                </ion-col>\n                <ion-col size=\"2.2\">\n                  <ion-row>\n                    <ion-col>\n                      <p>\n                        <strong\n                          >{{comment.user.firstName}}\n                          {{comment.user.lastname}}</strong\n                        >\n                        {{comment.comment}}\n                      </p>\n                    </ion-col>\n                  </ion-row>\n                  <ion-row>\n                    <ion-col>\n                      <ion-text color=\"medium\">{{comment.date | dateAgo}}</ion-text>\n                    </ion-col>\n                  </ion-row>\n                </ion-col>\n              </ion-row>\n            </ion-grid>\n          </ion-item>\n        </ion-virtual-scroll>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-content>\n<ion-footer>\n  <ion-item >\n    <ion-input type=\"text\" placeholder=\"Comment\" [(ngModel)]=\"commentText\"></ion-input>\n    <button [disabled]=\"!canSend\" clear item-right (click)=\"commentOnPost()\">Send</button>\n   </ion-item>\n</ion-footer>\n"]}
function asyncGeneratorStep(e,n,t,c,o,i,r){try{var s=e[i](r),a=s.value}catch(u){return void t(u)}s.done?n(a):Promise.resolve(a).then(c,o)}function _asyncToGenerator(e){return function(){var n=this,t=arguments;return new Promise((function(c,o){var i=e.apply(n,t);function r(e){asyncGeneratorStep(i,c,o,r,s,"next",e)}function s(e){asyncGeneratorStep(i,c,o,r,s,"throw",e)}r(void 0)}))}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var c=n[t];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{"O/ay":function(e,n,t){"use strict";t.r(n),t.d(n,"NotificationsPageModule",(function(){return m}));var c=t("TEn/"),o=t("tyNb"),i=t("ofXK"),r=t("3Pt+"),s=t("IzEk"),a=t("MCRb"),u=t("fXoL"),h=t("e8h1"),f=t("6Kw5");function g(e,n){1&e&&(u.hc(0,"h1",13),u.Kc(1," No notifications yet\n"),u.gc())}function l(e,n){if(1&e){var t=u.ic();u.hc(0,"ion-card",14),u.pc("click",(function(){u.Fc(t);var e=n.$implicit;return u.sc().openPost(e.postId)})),u.hc(1,"ion-grid",15),u.hc(2,"ion-row",16),u.hc(3,"ion-col"),u.hc(4,"ion-row"),u.hc(5,"ion-col"),u.dc(6,"img",17),u.gc(),u.gc(),u.hc(7,"ion-row"),u.hc(8,"ion-col"),u.dc(9,"img",18),u.gc(),u.gc(),u.gc(),u.hc(10,"ion-col",19),u.hc(11,"ion-row"),u.hc(12,"ion-col"),u.hc(13,"p"),u.hc(14,"strong"),u.Kc(15),u.gc(),u.Kc(16),u.gc(),u.gc(),u.gc(),u.hc(17,"ion-row",20),u.hc(18,"ion-col",21),u.hc(19,"ion-note"),u.Kc(20),u.tc(21,"dateAgo"),u.gc(),u.gc(),u.gc(),u.gc(),u.gc(),u.gc(),u.gc()}if(2&e){var c=n.$implicit;u.Rb(6),u.yc("src",c.userAvi,u.Gc),u.Rb(3),u.yc("src",c.icon,u.Gc),u.Rb(6),u.Lc(c.name),u.Rb(1),u.Nc(" ",c.verbage," ",1==c.isComment?'"'+c.comment+'"':""," "),u.Rb(4),u.Lc(u.uc(21,6,c.time))}}var d=function(){function e(n,t,c,o,i,r,s){_classCallCheck(this,e),this.storage=n,this.router=t,this.zone=c,this.userService=o,this.accountService=i,this.loadingController=r,this.cd=s,this.notifications=[],this.commentIcon="../../../assets/UI/comment-icon.svg",this.likeIcon="../../../assets/UI/liked-icon.svg",this.commentVerbage="commented on your post",this.likeVerbage="liked your post",this.userId="",this.userId=this.accountService.getUserId()}var n;return _createClass(e,[{key:"ionViewDidEnter",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var n,t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingController.create();case 2:return n=e.sent,e.next=5,n.present();case 5:return e.next=7,this.refreshNotifications(n).then((function(){t.cd.detectChanges()}));case 7:n.dismiss();case 8:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"refreshNotifications",value:function(e){var n=this;return this.notifications=[],new Promise((function(t){n.userService.userNotificationsGet().pipe(Object(s.a)(1)).subscribe(function(){var c=_asyncToGenerator(regeneratorRuntime.mark((function c(o){return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:o.forEach((function(e){var t=""!==e.comment;n.notifications.push({name:"".concat(e.userWhoPerformedAction.firstName," ").concat(e.userWhoPerformedAction.lastName),icon:t?n.commentIcon:n.likeIcon,verbage:t?n.commentVerbage:n.likeVerbage,isComment:t,comment:e.comment,time:e.date,postId:e.fkPostId,userAvi:e.userWhoPerformedAction.avi})})),void 0!==e.target&&e.target.complete(),t("done");case 1:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}())}))}},{key:"openPost",value:function(e){var n=this,t={replaceUrl:!0,state:{postId:e}};this.zone.run((function(){n.router.navigateByUrl("/comments",t)}))}}]),e}();d.\u0275fac=function(e){return new(e||d)(u.cc(h.b),u.cc(o.g),u.cc(u.L),u.cc(a.c),u.cc(a.a),u.cc(c.V),u.cc(u.j))},d.\u0275cmp=u.Wb({type:d,selectors:[["notifications"]],decls:14,vars:3,consts:[[1,"ion-no-border",2,"background-color","#128C7E"],["color","#128C7E",1,"ion-no-border"],[1,"header-grid"],[1,"ion-align-items-baseline"],[1,"ion-justify-content-start"],["defaultHref","/tab1",2,"color","white"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["refresherRef",""],["pullingText","Pull to refresh","refreshingSpinner","circles","refreshingText","Refreshing..."],["class","ion-text-center ion-justify-center","style","height: 100%; flex-direction: column",4,"ngIf"],[1,"notifications-list"],[3,"click",4,"ngFor","ngForOf"],[1,"ion-text-center","ion-justify-center",2,"height","100%","flex-direction","column"],[3,"click"],[1,"comments-grid"],[2,"padding-left","8px","padding-top","8px"],[1,"user-pic","img-center",3,"src"],[3,"src"],["size","2.5"],[1,"ion-align-items-end"],[1,"ion-align-self-end"]],template:function(e,n){1&e&&(u.hc(0,"ion-header",0),u.hc(1,"ion-toolbar",1),u.hc(2,"ion-grid",2),u.hc(3,"ion-row",3),u.hc(4,"ion-col",4),u.hc(5,"ion-buttons"),u.dc(6,"ion-back-button",5),u.gc(),u.gc(),u.gc(),u.gc(),u.gc(),u.gc(),u.hc(7,"ion-content",6),u.hc(8,"ion-refresher",7,8),u.pc("ionRefresh",(function(e){return n.refreshNotifications(e)})),u.dc(10,"ion-refresher-content",9),u.gc(),u.Jc(11,g,2,0,"h1",10),u.hc(12,"ion-list",11),u.Jc(13,l,22,8,"ion-card",12),u.gc(),u.gc()),2&e&&(u.Rb(7),u.yc("fullscreen",!0),u.Rb(4),u.yc("ngIf",0===n.notifications.length),u.Rb(2),u.yc("ngForOf",n.notifications))},directives:[c.t,c.R,c.s,c.H,c.m,c.h,c.e,c.f,c.n,c.E,c.F,i.k,c.C,i.j,c.i,c.D],pipes:[f.a],styles:[".user-pic[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}p[_ngcontent-%COMP%]{margin:0;padding-top:6px;padding-right:2px;padding-bottom:12px}ion-content[_ngcontent-%COMP%]{--padding-top:10%}.comments-grid[_ngcontent-%COMP%]{--ion-grid-columns:3;--ion-grid-column-padding:1px;--ion-grid-padding:1px}ion-card[_ngcontent-%COMP%]{margin-bottom:10px!important;margin-top:4px!important}"]});var p=t("PCNd"),m=function e(){_classCallCheck(this,e)};m.\u0275mod=u.ac({type:m}),m.\u0275inj=u.Zb({factory:function(e){return new(e||m)},imports:[[c.T,i.c,r.g,p.a,o.k.forChild([{path:"",component:d}])]]})}}]);